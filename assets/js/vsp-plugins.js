//@codekit-append ../vendors/vspajax/jquery.vsp-ajax.min.js
!function(a){"use strict";"undefined"==typeof Library&&(a.VSPAjax=function(t,a){this.ajax(t,a)},a.VSPAjaxQ=function(){return this.init()}),VSPAjax.prototype={VERSION:"1.0",_Ajax:"",_default_ajax_options:{method:"GET",data:"",url:ajaxurl},_AjaxOptions:{},_Options:{},_mergeArray:function(){var t,a=Array.prototype.slice.call(arguments),i=a.length,n={},o="",e=0,s=0,r=0,_=0,c=Object.prototype.toString,u=!0;for(r=0;r<i;r++)if("[object Array]"!==c.call(a[r])){u=!1;break}if(u){for(u=[],r=0;r<i;r++)u=u.concat(a[r]);return u}for(_=r=0;r<i;r++)if(t=a[r],"[object Array]"===c.call(t))for(s=0,e=t.length;s<e;s++)n[_++]=t[s];else for(o in t)t.hasOwnProperty(o)&&(parseInt(o,10)+""===o?n[_++]=t[o]:n[o]=t[o]);return n},_set_Options:function(t){void 0!==t&&(this._Options=t)},_set_ajax_options:function(t){void 0!==t&&(this._AjaxOptions=this._mergeArray(this._default_ajax_options,t))},_BodyTrigger:function(t){void 0!==this._Options.trigger_code&&jQuery("body").trigger(this._Options.trigger_code,[t,Options.element,this._AjaxOptions])},_FuncTrigger:function(t,a){"before"==t&&"function"==typeof this._Options.before?this._Options.before(a):"after"==t&&"function"==typeof this._Options.after?this._Options.after(a):"onSuccess"==t&&"function"==typeof this._AjaxOptions.OnSuccess?this._AjaxOptions.OnSuccess(a):"onError"==t&&"function"==typeof this._AjaxOptions.onError?this._AjaxOptions.onError(a):"OnAlways"==t&&"function"==typeof this._AjaxOptions.OnAlways?this._AjaxOptions.OnAlways(a):"AjaxQ"==t&&jQuery("body").trigger("vsp-ajaxq")},_handle_response:function(t){return void 0===t.data||void 0===t.data.msg||(this._Options.response_element.html(t.data.msg),!1)},_string_function_callback:function(t){try{a[t]()}catch(t){console.log(t)}},_array_function_callback:function(t){jQuery.each(t,function(t,a){this._string_function_callback(a)})},_handle_callback:function(t){var i=this;void 0!==t.data&&void 0!==t.data.callback&&("string"==typeof t.data.callback?i._string_function_callback(t.data.callback):"object"!=typeof t.data.callback&&"array"!=typeof t.data.callback||jQuery.each(t.data.callback,function(t,a){if(t==parseInt(t))"string"==typeof a?i._string_function_callback(a):"object"!=typeof a&&"array"!=typeof a||i._array_function_callback(a);else try{new Function(t,a)()}catch(t){console.log("New Error Occured :"+a),console.log(t)}}))},ajax:function(t,a){var i=this;this._set_ajax_options(t),this._set_Options(a),void 0!==t.ajax&&this._set_ajax_options(t.ajax),void 0!==t.options&&this._set_Options(t.options),this._FuncTrigger("before"),this._BodyTrigger("before"),void 0===this._Options.response_element&&(this._Options.response_element=jQuery(".inline-ajax-response")),this._Ajax=jQuery.ajax(this._AjaxOptions),this._Ajax.done(function(t){i._FuncTrigger("onSuccess",t),i._BodyTrigger("success"),i._handle_response(t),i._handle_callback(t)}),this._Ajax.fail(function(t){i._handle_response(t.responseJSON.data),i._handle_callback(t),i._FuncTrigger("onError",t),i._BodyTrigger("failed")}),this._Ajax.always(function(t){i._FuncTrigger("OnAlways",t),i._FuncTrigger("AjaxQ"),i._BodyTrigger("always")}),this._FuncTrigger("after"),this._BodyTrigger("after")}},VSPAjaxQ.prototype={ajax_queue:[],is_ajax_ongoing:!1,init:function(){var t=this;return jQuery("body").on("vsp-ajaxq",function(){void 0!==t.ajax_queue[0]?(t.ajax_queue[0].elem.removeClass("vspajaxq-in-queue"),t.ajax_queue.shift(),t.kick_start_ajax()):this.is_ajax_ongoing=!1}),this},kick_start_ajax:function(){this.is_ajax_ongoing=!0,void 0!==this.ajax_queue[0]?new VSPAjax(this.ajax_queue[0].data):this.is_ajax_ongoing=!1},add:function(t,a){t.hasClass("vspajaxq-in-queue")||(this.ajax_queue.push({elem:t,data:a}),t.addClass("vspajaxq-in-queue"),!1===this.is_ajax_ongoing&&this.kick_start_ajax())}}}(window);
